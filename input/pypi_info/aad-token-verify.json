{"info":{"author":"['Daniel Thompson']","author_email":"daniel.thompson2@genmills.com","bugtrack_url":null,"classifiers":["Development Status :: 4 - Beta","Intended Audience :: Developers","License :: OSI Approved :: MIT License","Programming Language :: Python :: 3.6","Programming Language :: Python :: 3.7","Programming Language :: Python :: 3.8","Programming Language :: Python :: 3.9","Topic :: Software Development :: Libraries :: Python Modules"],"description":"[![Tests](https://github.com/GeneralMills/azure-ad-token-verify/workflows/Test%20and%20Analysis/badge.svg)](https://github.com/GeneralMills/azure-ad-token-verify/actions)\n[![PyPi](https://img.shields.io/pypi/pyversions/aad-token-verify.svg)](https://pypi.python.org/pypi/aad-token-verify)\n# aad-token-verify\nA python utility library to verify an Azure Active Directory OAuth token. Meant for resource servers serving secured API endpoints (eg FastAPI)\n\n## Install\n\n```bash\npython3 -m pip install aad-token-verify\n```\n\n## Usage\n\nTo use stand alone, simply import the verify payload function and call.\n\n```python\nfrom aad_token_verify import get_verified_payload\n\ntoken_verifier = get_verified_payload(token, tenant_id=\"YOUR_TENANT_ID\", audience_uris=[\"AUDIENCE_URI\"])\n```\n\nTo use with FastAPI, there's some setup to get the Swagger docs to work\n\n```python\nfrom fastapi import Depends, FastAPI\nfrom fastapi.openapi.models import OAuthFlowImplicit, OAuthFlows\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom fastapi.security import OAuth2\n\nfrom aad_token_verify import get_verified_payload\n\n# TODO Update these with your Tenant ID, Audience URI, and Client ID\n_TENANT_ID = \"ISSUER_TENANT_ID\"\n_AUDIENCE_URI = \"https://YOUR_AUDIENCE_URI\"\n_AAD_CLIENT_ID = \"CLIENT_ID\"\n\noauth2_scheme = OAuth2(\n    flows=OAuthFlows(\n        implicit=OAuthFlowImplicit(\n            authorizationUrl=f\"https://login.microsoftonline.com/{_TENANT_ID}/oauth2/v2.0/authorize\",\n            scopes={\n                f\"{_AUDIENCE_URI}/.default\": \"Custom Audience URI scope\",\n                \"openid\": \"OpenID scope\",\n                \"profile\": \"Profile scope\",\n                \"email\": \"email scope\",\n            },\n        )\n    )\n)\n\nasync def get_current_user(\n    auth_header: str = Depends(oauth2_scheme),  # noqa: B008\n):\n    scheme, _, token = auth_header.partition(\" \")\n    return get_verified_payload(\n        token,\n        tenantId=_TENANT_ID,\n        audience_uris=[_AUDIENCE_URI],\n    )\n\napp = FastAPI()\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\napp.swagger_ui_init_oauth = {\n    \"usePkceWithAuthorizationCodeGrant\": True,\n    \"clientId\": _AAD_CLIENT_ID,\n    \"scopes\": [f\"{_AUDIENCE_URI}.default\"],\n}\n\n@app.get(\"/\")\nasync def secured_endpoint(user=Depends(get_current_user)):\n    return user\n```\n\n## Contributing\n\nFeel free to submit issues and pull requests!\n","description_content_type":"text/markdown","docs_url":null,"download_url":"","downloads":{"last_day":-1,"last_month":-1,"last_week":-1},"dynamic":null,"home_page":"https://github.com/GeneralMills/azure-ad-token-verify","keywords":"azure ad token oauth verify jwt","license":"MIT","maintainer":"","maintainer_email":"","name":"aad-token-verify","package_url":"https://pypi.org/project/aad-token-verify/","platform":null,"project_url":"https://pypi.org/project/aad-token-verify/","project_urls":{"Homepage":"https://github.com/GeneralMills/azure-ad-token-verify"},"provides_extra":null,"release_url":"https://pypi.org/project/aad-token-verify/0.2.0/","requires_dist":["requests (<3,>=2.25.1)","PyJWT (<3,>=2.1.0)","cryptography (<42,>=41.0.1)","cachetools (<6,>=5.3.1)"],"requires_python":">=3.7","summary":"A python utility library to verify an Azure Active Directory OAuth token","version":"0.2.0","yanked":false,"yanked_reason":null},"last_serial":18410251,"releases":{"0.1.1":[{"comment_text":"","digests":{"blake2b_256":"ea1331c75cb80f72fda0a76fc1763ef1198ddd553cb37f9d5fc65ad1bbacd9ec","md5":"90ec845f2d7afe5bf924be96f0c67bf3","sha256":"69535cbbc6baf41d1a9c5b2cd2c61768d52b14979f73291e8b2d74b6ee3e7da5"},"downloads":-1,"filename":"aad_token_verify-0.1.1-py3-none-any.whl","has_sig":false,"md5_digest":"90ec845f2d7afe5bf924be96f0c67bf3","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.6","size":5130,"upload_time":"2021-06-11T18:04:13","upload_time_iso_8601":"2021-06-11T18:04:13.739667Z","url":"https://files.pythonhosted.org/packages/ea/13/31c75cb80f72fda0a76fc1763ef1198ddd553cb37f9d5fc65ad1bbacd9ec/aad_token_verify-0.1.1-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"47e4d4d5f47bea7791cc58d147caaf5238e58f793fb3d9ac96ea1f890b96e2e6","md5":"00cafbf0b6db9e5a18c00740a9e1a840","sha256":"5e218f551f817c95dedd78e5295c03109a1afc0296d5d8a23231bb4b78eca59c"},"downloads":-1,"filename":"aad-token-verify-0.1.1.tar.gz","has_sig":false,"md5_digest":"00cafbf0b6db9e5a18c00740a9e1a840","packagetype":"sdist","python_version":"source","requires_python":">=3.6","size":4801,"upload_time":"2021-06-11T18:04:14","upload_time_iso_8601":"2021-06-11T18:04:14.803048Z","url":"https://files.pythonhosted.org/packages/47/e4/d4d5f47bea7791cc58d147caaf5238e58f793fb3d9ac96ea1f890b96e2e6/aad-token-verify-0.1.1.tar.gz","yanked":false,"yanked_reason":null}],"0.1.3":[{"comment_text":"","digests":{"blake2b_256":"d3b3a4b52b534c333628d4083d30bd1aec92b7e55f1a3f2683d71bb2c69f236c","md5":"ed8392bc29342a5a452dbc9f55766aff","sha256":"81eb4cea7c31e1bd052d68737a5292dcb461cb7a879b919a0d39567009cf1818"},"downloads":-1,"filename":"aad_token_verify-0.1.3-py3-none-any.whl","has_sig":false,"md5_digest":"ed8392bc29342a5a452dbc9f55766aff","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.6","size":5374,"upload_time":"2021-06-14T16:13:17","upload_time_iso_8601":"2021-06-14T16:13:17.128040Z","url":"https://files.pythonhosted.org/packages/d3/b3/a4b52b534c333628d4083d30bd1aec92b7e55f1a3f2683d71bb2c69f236c/aad_token_verify-0.1.3-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"dfff665a8832e768bec9b3d0feba82b7ec9ce07758dd9a3d5116b352ab73c4f7","md5":"3e2eeba11dcde63b91a6de1ac8da02d9","sha256":"6c7da7dd56b617ff2eefe142a56edde1d62ae6aeb3c0b7994bcb133d84899245"},"downloads":-1,"filename":"aad-token-verify-0.1.3.tar.gz","has_sig":false,"md5_digest":"3e2eeba11dcde63b91a6de1ac8da02d9","packagetype":"sdist","python_version":"source","requires_python":">=3.6","size":4863,"upload_time":"2021-06-14T16:13:18","upload_time_iso_8601":"2021-06-14T16:13:18.401636Z","url":"https://files.pythonhosted.org/packages/df/ff/665a8832e768bec9b3d0feba82b7ec9ce07758dd9a3d5116b352ab73c4f7/aad-token-verify-0.1.3.tar.gz","yanked":false,"yanked_reason":null}],"0.1.4":[{"comment_text":"","digests":{"blake2b_256":"f167f599cec760cade8129bfa81e71761abac3a7bc73a3ef36006a0793f2a12d","md5":"e90e459f8018cf40bc776200f4207295","sha256":"f78b97ffc6800c329cd0aff8e6cf84a4e0c4533caf7d80722043fe24d9dbe9d0"},"downloads":-1,"filename":"aad_token_verify-0.1.4-py3-none-any.whl","has_sig":false,"md5_digest":"e90e459f8018cf40bc776200f4207295","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.6","size":5365,"upload_time":"2021-10-29T15:46:55","upload_time_iso_8601":"2021-10-29T15:46:55.535293Z","url":"https://files.pythonhosted.org/packages/f1/67/f599cec760cade8129bfa81e71761abac3a7bc73a3ef36006a0793f2a12d/aad_token_verify-0.1.4-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"c5660e9689e40a901a4f97bf7f80a17a2002b9c5f0a8c8f391587a9cf6de2df9","md5":"40df38e8680b5255671386128d43dbd3","sha256":"319f7bdb5f6e389fb10f0c84cee01b62a632cfacc3529b83c1609fc50aa12ba1"},"downloads":-1,"filename":"aad-token-verify-0.1.4.tar.gz","has_sig":false,"md5_digest":"40df38e8680b5255671386128d43dbd3","packagetype":"sdist","python_version":"source","requires_python":">=3.6","size":4854,"upload_time":"2021-10-29T15:46:57","upload_time_iso_8601":"2021-10-29T15:46:57.017158Z","url":"https://files.pythonhosted.org/packages/c5/66/0e9689e40a901a4f97bf7f80a17a2002b9c5f0a8c8f391587a9cf6de2df9/aad-token-verify-0.1.4.tar.gz","yanked":false,"yanked_reason":null}],"0.2.0":[{"comment_text":"","digests":{"blake2b_256":"d288c41e394e6ad9b68716acde148546a5c79e42d77c8b08fbf64153a0309f82","md5":"0906d8b228ee78d917789a719dfcffbf","sha256":"a32a29c29b5eb9dd030d0f5378a46e316b27c3a7152635aa7e3fb50fb55c7a6e"},"downloads":-1,"filename":"aad_token_verify-0.2.0-py3-none-any.whl","has_sig":false,"md5_digest":"0906d8b228ee78d917789a719dfcffbf","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.7","size":5348,"upload_time":"2023-06-07T15:38:33","upload_time_iso_8601":"2023-06-07T15:38:33.684832Z","url":"https://files.pythonhosted.org/packages/d2/88/c41e394e6ad9b68716acde148546a5c79e42d77c8b08fbf64153a0309f82/aad_token_verify-0.2.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"5544bfb8208cdc163da2deb00921231e089a9136c4bdc693f2417a0010ce4663","md5":"e892de16471a999f0f7bb6e151a2a06c","sha256":"91fdb46070b0f4b258d7ffb8f5bee11de2e6728e2f0885cf04dbb354f59dcdaf"},"downloads":-1,"filename":"aad-token-verify-0.2.0.tar.gz","has_sig":false,"md5_digest":"e892de16471a999f0f7bb6e151a2a06c","packagetype":"sdist","python_version":"source","requires_python":">=3.7","size":5012,"upload_time":"2023-06-07T15:38:35","upload_time_iso_8601":"2023-06-07T15:38:35.186165Z","url":"https://files.pythonhosted.org/packages/55/44/bfb8208cdc163da2deb00921231e089a9136c4bdc693f2417a0010ce4663/aad-token-verify-0.2.0.tar.gz","yanked":false,"yanked_reason":null}]},"urls":[{"comment_text":"","digests":{"blake2b_256":"d288c41e394e6ad9b68716acde148546a5c79e42d77c8b08fbf64153a0309f82","md5":"0906d8b228ee78d917789a719dfcffbf","sha256":"a32a29c29b5eb9dd030d0f5378a46e316b27c3a7152635aa7e3fb50fb55c7a6e"},"downloads":-1,"filename":"aad_token_verify-0.2.0-py3-none-any.whl","has_sig":false,"md5_digest":"0906d8b228ee78d917789a719dfcffbf","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.7","size":5348,"upload_time":"2023-06-07T15:38:33","upload_time_iso_8601":"2023-06-07T15:38:33.684832Z","url":"https://files.pythonhosted.org/packages/d2/88/c41e394e6ad9b68716acde148546a5c79e42d77c8b08fbf64153a0309f82/aad_token_verify-0.2.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"5544bfb8208cdc163da2deb00921231e089a9136c4bdc693f2417a0010ce4663","md5":"e892de16471a999f0f7bb6e151a2a06c","sha256":"91fdb46070b0f4b258d7ffb8f5bee11de2e6728e2f0885cf04dbb354f59dcdaf"},"downloads":-1,"filename":"aad-token-verify-0.2.0.tar.gz","has_sig":false,"md5_digest":"e892de16471a999f0f7bb6e151a2a06c","packagetype":"sdist","python_version":"source","requires_python":">=3.7","size":5012,"upload_time":"2023-06-07T15:38:35","upload_time_iso_8601":"2023-06-07T15:38:35.186165Z","url":"https://files.pythonhosted.org/packages/55/44/bfb8208cdc163da2deb00921231e089a9136c4bdc693f2417a0010ce4663/aad-token-verify-0.2.0.tar.gz","yanked":false,"yanked_reason":null}],"vulnerabilities":[]}
