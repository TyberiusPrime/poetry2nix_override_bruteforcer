{"info":{"author":"Wang Liang","author_email":null,"bugtrack_url":null,"classifiers":["Development Status :: 5 - Production/Stable","Intended Audience :: Developers","License :: OSI Approved :: MIT License","Programming Language :: Python :: 3","Programming Language :: Python :: 3 :: Only","Topic :: Software Development :: Libraries :: Python Modules"],"description":"# django-middleware-global-request\n\n\nDjango middleware that keep request instance for every thread.\n\n## Install\n\n\n```shell\npip install django-middleware-global-request\n```\n## Note\n\n- It's NOT good to use global request, you should pass the request instance from view to anywhere you want to use it.\n- If you use the global request in Model layout, it means when you call the Model method from Django Shell, you get a None request.\n\n## Usage\n\n1. Add django application `django_middleware_global_request` to INSTALLED_APPS in `pro/settings.py`:\n\n    ```python\n    INSTALLED_APPS = [\n        ...\n        'django_middleware_global_request',\n        ...\n    ]\n    ```\n\n2. Add `GlobalRequestMiddleware` to MIDDLEWARE in `pro/settings.py`:\n\n\n    ```python\n    MIDDLEWARE = [\n        ...\n        'django_middleware_global_request.middleware.GlobalRequestMiddleware',\n        ...\n    ]\n    ```\n\n3. Use `get_request` to get the global request instance from a function in `pro/models.py`:\n\n    ```python\n    from django.db import models\n    from django.conf import settings\n    from django_middleware_global_request import get_request\n\n    class Book(models.Model):\n        name = models.CharField(max_length=64)\n        author = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, blank=True)\n\n        def __str__(self):\n            return self.name\n\n        def save(self, *args, **kwargs):\n            if not self.author:\n                request = get_request()\n                if request:\n                    self.author = request.user\n            return super().save(*args, **kwargs)\n    ```\n\n4. Use `with GlobalRequest(xxx): pass` to set the global request to a new value in NON-USER-REQUEST context, e.g. in `management command` context or in `python manage.py shell` context. Out of the `with scope`, the global request instance will be reset to the value when entering into the `with scope`.\n\n    ```python\n    import djclick as click\n    from django.contrib.auth import get_user_model\n    from django_middleware_global_request_example.models import Book\n    from django_middleware_global_request import GlobalRequest\n\n\n    @click.command()\n    @click.option(\"-n\", \"--number\", type=int, default=10)\n    def create(number):\n        admin = get_user_model().objects.all()[0]\n        with GlobalRequest(user=admin):\n            for i in range(number):\n                book = Book(name=\"book{idx}\".format(idx=i+1))\n                book.save()\n                print(i, book.name, book.author.username)\n    ```\n\n5. Use `GlobalRequestStorage` to set the global request instance for current thread context. The global request instance will all time exists until you changed it by another value.\n\n*example.py*\n\n```\nfrom django.contrib.auth import get_user_model\nfrom django_middleware_global_request_example.models import Book\nfrom django_middleware_global_request import GlobalRequestStorage\n\nb1 = Book(name=\"b1\")\nb1.save()\nprint(b1, b1.author)\n\nadmin = get_user_model().objects.get(username=\"admin\")\nGlobalRequestStorage().set_user(admin)\n\nb2 = Book(name=\"b2\")\nb2.save()\nprint(b2, b2.author)\n\nb3 = Book(name=\"b3\")\nb3.save()\nprint(b3, b3.author)\n```\n\n*example result in python3 manage.py shell context*\n\n```\ntest@test django-middleware-global-request % python3.9 manage.py shell\nPython 3.9.13 (main, Jun  8 2022, 15:40:49) \nType 'copyright', 'credits' or 'license' for more information\nIPython 8.3.0 -- An enhanced Interactive Python. Type '?' for help.\n\nIn [1]: import example\nb1 None\nb2 admin\nb3 admin\n```\n\n## Test Passed\n\n- python27:~=django1.11.29\n- python34:~=django1.11.29\n- python34:~=django2.0.13\n- python35:~=django1.11.29\n- python35:~=django2.0.13\n- python35:~=django2.1.15\n- python35:~=django2.2.28\n- python36:~=django2.0.13\n- python36:~=django2.1.15\n- python36:~=django2.2.28\n- python36:~=django3.0.14\n- python36:~=django3.1.14\n- python36:~=django3.2.21\n- python37:~=django2.0.13\n- python37:~=django2.1.15\n- python37:~=django2.2.28\n- python37:~=django3.0.14\n- python37:~=django3.1.14\n- python37:~=django3.2.21\n- python38:~=django2.0.13\n- python38:~=django2.1.15\n- python38:~=django2.2.28\n- python38:~=django3.0.14\n- python38:~=django3.1.14\n- python38:~=django3.2.21\n- python38:~=django4.0.10\n- python38:~=django4.1.11\n- python38:~=django4.2.5\n- python39:~=django2.0.13\n- python39:~=django2.1.15\n- python39:~=django2.2.28\n- python39:~=django3.0.14\n- python39:~=django3.1.14\n- python39:~=django3.2.21\n- python39:~=django4.0.10\n- python39:~=django4.1.11\n- python39:~=django4.2.5\n- python310:~=django2.1.15\n- python310:~=django2.2.28\n- python310:~=django3.0.14\n- python310:~=django3.1.14\n- python310:~=django3.2.21\n- python310:~=django4.0.10\n- python310:~=django4.1.11\n- python310:~=django4.2.5\n- python311:~=django2.2.28\n- python311:~=django3.0.14\n- python311:~=django3.1.14\n- python311:~=django3.2.21\n- python311:~=django4.0.10\n- python311:~=django4.1.11\n- python311:~=django4.2.5\n\n## Releases\n\n### v0.1.0\n\n- First release.\n\n### v0.1.1\n\n- Some changes.\n\n### v0.1.2\n\n- Some changes.\n\n### v0.2.0\n\n- Rename the core package from django_global_request to django_middleware_global_request so that it matches with the package name. **Note:** It's NOT backward compatible, all applications that using old name MUST do changes.\n\n### v0.3.0\n\n- Add `GlobalRequest` and `GlobalRequestStorage` to set the global request instance value for NON-USER-REQUEST context.\n\n### v0.3.1\n\n- Add `app_middleware_requires` to module \\_\\_init\\_\\_.py to work with `django-app-requires`.\n\n### v0.3.2\n\n- Doc update.\n\n### v0.3.3\n\n- All unit test passed.\n\n### v0.3.4\n\n- Add unit tests for python12 and django-5.0.6.\n\n\n","description_content_type":"text/markdown","docs_url":null,"download_url":null,"downloads":{"last_day":-1,"last_month":-1,"last_week":-1},"dynamic":null,"home_page":null,"keywords":"django extensions, django middleware global request","license":"MIT","maintainer":"Wang Liang","maintainer_email":null,"name":"django-middleware-global-request","package_url":"https://pypi.org/project/django-middleware-global-request/","platform":null,"project_url":"https://pypi.org/project/django-middleware-global-request/","project_urls":null,"provides_extra":null,"release_url":"https://pypi.org/project/django-middleware-global-request/0.3.4/","requires_dist":["django"],"requires_python":null,"summary":"Django middleware that keep request instance for every thread.","version":"0.3.4","yanked":false,"yanked_reason":null},"last_serial":23325303,"releases":{"0.1.0":[{"comment_text":"","digests":{"blake2b_256":"1cfc2404e36717737bc8141a0e792b708ca79fcbfd0563e18931231aab90d6f8","md5":"9d3b297525d32a78dab27bf1f7f1e56e","sha256":"2940069b35147bcc9631c0cb8624a77429cb119d95b8944022b67bc642996c75"},"downloads":-1,"filename":"django-middleware-global-request-0.1.0.tar.gz","has_sig":false,"md5_digest":"9d3b297525d32a78dab27bf1f7f1e56e","packagetype":"sdist","python_version":"source","requires_python":null,"size":2263,"upload_time":"2017-12-28T06:16:39","upload_time_iso_8601":"2017-12-28T06:16:39.466518Z","url":"https://files.pythonhosted.org/packages/1c/fc/2404e36717737bc8141a0e792b708ca79fcbfd0563e18931231aab90d6f8/django-middleware-global-request-0.1.0.tar.gz","yanked":false,"yanked_reason":null}],"0.1.1":[{"comment_text":"","digests":{"blake2b_256":"8617d282da88c39609d03ee0a92e27c8c8e7767ca7a07a2b3e9845d09931f382","md5":"49bb63589e451ac412572bd1f2c3a121","sha256":"04e56a646262de77d329171494e6e744bcaa10847696b356843c103644a233e0"},"downloads":-1,"filename":"django-middleware-global-request-0.1.1.tar.gz","has_sig":false,"md5_digest":"49bb63589e451ac412572bd1f2c3a121","packagetype":"sdist","python_version":"source","requires_python":null,"size":2328,"upload_time":"2018-02-28T02:55:46","upload_time_iso_8601":"2018-02-28T02:55:46.901499Z","url":"https://files.pythonhosted.org/packages/86/17/d282da88c39609d03ee0a92e27c8c8e7767ca7a07a2b3e9845d09931f382/django-middleware-global-request-0.1.1.tar.gz","yanked":false,"yanked_reason":null}],"0.1.2":[{"comment_text":"","digests":{"blake2b_256":"d4e02a8ec5553ce771fd2e400f845d3bba9ddfe283f7a5b9d7d1f6880ef613c0","md5":"6f92e5c22e92f4e4fa09305bf565855b","sha256":"f6490759bc9f7dbde4001709554e29ca715daf847f2222914b4e47117dca9313"},"downloads":-1,"filename":"django-middleware-global-request-0.1.2.tar.gz","has_sig":false,"md5_digest":"6f92e5c22e92f4e4fa09305bf565855b","packagetype":"sdist","python_version":"source","requires_python":null,"size":2386,"upload_time":"2019-04-07T10:25:42","upload_time_iso_8601":"2019-04-07T10:25:42.847624Z","url":"https://files.pythonhosted.org/packages/d4/e0/2a8ec5553ce771fd2e400f845d3bba9ddfe283f7a5b9d7d1f6880ef613c0/django-middleware-global-request-0.1.2.tar.gz","yanked":false,"yanked_reason":null}],"0.2.0":[{"comment_text":"","digests":{"blake2b_256":"ceb8a4b6f3856c8efbaaeaa1b0299e059b2f5ef743a5e7f0ad4b0aa977ad6934","md5":"0f2512e052fcdfed6e4438807ef5e7fc","sha256":"31f277741cd228a93ab676afab8e4a13c884b78e4feb72c3bccc40083fb22c1a"},"downloads":-1,"filename":"django-middleware-global-request-0.2.0.tar.gz","has_sig":false,"md5_digest":"0f2512e052fcdfed6e4438807ef5e7fc","packagetype":"sdist","python_version":"source","requires_python":null,"size":3274,"upload_time":"2020-03-09T06:45:53","upload_time_iso_8601":"2020-03-09T06:45:53.617256Z","url":"https://files.pythonhosted.org/packages/ce/b8/a4b6f3856c8efbaaeaa1b0299e059b2f5ef743a5e7f0ad4b0aa977ad6934/django-middleware-global-request-0.2.0.tar.gz","yanked":false,"yanked_reason":null}],"0.3.0":[{"comment_text":"","digests":{"blake2b_256":"e9aa10b93234104153887d5bcaa9cea633b19c0dc9dc12a223da20acf4f5b83e","md5":"1e2cd972b71791c1903e8526f3b1aa9e","sha256":"3c6a706b3be14f049bd1f3987d7b67a89ee88bea3c19bc9b6b8e217c22b969d1"},"downloads":-1,"filename":"django_middleware_global_request-0.3.0-py3-none-any.whl","has_sig":false,"md5_digest":"1e2cd972b71791c1903e8526f3b1aa9e","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":7186,"upload_time":"2022-06-16T08:30:21","upload_time_iso_8601":"2022-06-16T08:30:21.192989Z","url":"https://files.pythonhosted.org/packages/e9/aa/10b93234104153887d5bcaa9cea633b19c0dc9dc12a223da20acf4f5b83e/django_middleware_global_request-0.3.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"2b443b11e3f27b2155e09920e58e9f12bf8187436a5a780d4b8b44f40d7cc0e8","md5":"aa50cc21cbbea859e1140a0be66ee787","sha256":"f4d5f0a0412152a384c6432d6c8fbdc255f407a9b23ee8e541fedfb7e851c3e5"},"downloads":-1,"filename":"django-middleware-global-request-0.3.0.tar.gz","has_sig":false,"md5_digest":"aa50cc21cbbea859e1140a0be66ee787","packagetype":"sdist","python_version":"source","requires_python":null,"size":5888,"upload_time":"2022-06-16T08:30:24","upload_time_iso_8601":"2022-06-16T08:30:24.454558Z","url":"https://files.pythonhosted.org/packages/2b/44/3b11e3f27b2155e09920e58e9f12bf8187436a5a780d4b8b44f40d7cc0e8/django-middleware-global-request-0.3.0.tar.gz","yanked":false,"yanked_reason":null}],"0.3.1":[{"comment_text":"","digests":{"blake2b_256":"2526dad2444a3711f50ebb2fbcd47c3ed4d7b80ba19f0afeb86cb0fb2b6e97ee","md5":"350a9b51640a80518ebd7b94279ddc4d","sha256":"042c7e1fda5e23088a9d38fb26c62b6c68608cc6c0411f69004e26293cef6eee"},"downloads":-1,"filename":"django_middleware_global_request-0.3.1-py3-none-any.whl","has_sig":false,"md5_digest":"350a9b51640a80518ebd7b94279ddc4d","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":8242,"upload_time":"2022-09-07T14:30:18","upload_time_iso_8601":"2022-09-07T14:30:18.051724Z","url":"https://files.pythonhosted.org/packages/25/26/dad2444a3711f50ebb2fbcd47c3ed4d7b80ba19f0afeb86cb0fb2b6e97ee/django_middleware_global_request-0.3.1-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"91e2638e6500cc4ebc9ddfa3687bfd02271afd8d3ef1e80050942b54f7b622ad","md5":"a13e2c0b0f5de84e685ee99688408b7d","sha256":"98f3012414ca56197f456c6472791e9a3eb1cddf53359a38f515a9b6d3d157ac"},"downloads":-1,"filename":"django-middleware-global-request-0.3.1.tar.gz","has_sig":false,"md5_digest":"a13e2c0b0f5de84e685ee99688408b7d","packagetype":"sdist","python_version":"source","requires_python":null,"size":6148,"upload_time":"2022-09-07T14:30:21","upload_time_iso_8601":"2022-09-07T14:30:21.622840Z","url":"https://files.pythonhosted.org/packages/91/e2/638e6500cc4ebc9ddfa3687bfd02271afd8d3ef1e80050942b54f7b622ad/django-middleware-global-request-0.3.1.tar.gz","yanked":false,"yanked_reason":null}],"0.3.2":[{"comment_text":"","digests":{"blake2b_256":"91895bb3b6f6a873ff6566767632e4bbb3bf88f1e7df2494477cd5edbe5f2f4e","md5":"c44fddcacfdcfeb46f747fea30c1fa35","sha256":"7f68999993973525f0bae347b5297a909757722d6190e73be40ae03b05bec635"},"downloads":-1,"filename":"django_middleware_global_request-0.3.2-py3-none-any.whl","has_sig":false,"md5_digest":"c44fddcacfdcfeb46f747fea30c1fa35","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":7749,"upload_time":"2023-09-13T07:40:30","upload_time_iso_8601":"2023-09-13T07:40:30.641149Z","url":"https://files.pythonhosted.org/packages/91/89/5bb3b6f6a873ff6566767632e4bbb3bf88f1e7df2494477cd5edbe5f2f4e/django_middleware_global_request-0.3.2-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"207570795eb0f2b720cff2ebaff2facd141462e16ce65151bca08cf302415543","md5":"7d1d0e18afd317a29089fbe78aa7bbc7","sha256":"5085aabfeab57a965d13a184bce28c59fea27e6045342bcd99eb914518ca1e88"},"downloads":-1,"filename":"django-middleware-global-request-0.3.2.tar.gz","has_sig":false,"md5_digest":"7d1d0e18afd317a29089fbe78aa7bbc7","packagetype":"sdist","python_version":"source","requires_python":null,"size":6182,"upload_time":"2023-09-13T07:40:37","upload_time_iso_8601":"2023-09-13T07:40:37.152336Z","url":"https://files.pythonhosted.org/packages/20/75/70795eb0f2b720cff2ebaff2facd141462e16ce65151bca08cf302415543/django-middleware-global-request-0.3.2.tar.gz","yanked":false,"yanked_reason":null}],"0.3.3":[{"comment_text":"","digests":{"blake2b_256":"8cb5cb8fba3c3fb152fc2c3dd9c9fc6f333b1259edd6cef46aa99fff3e0c3bb7","md5":"a3b8d5a1026edd48b7d4d566424ddd90","sha256":"0ce7fc406d14d4befd484cab1455f90a75b749fdcb358fd3c1596f2c4ea16d46"},"downloads":-1,"filename":"django_middleware_global_request-0.3.3-py3-none-any.whl","has_sig":false,"md5_digest":"a3b8d5a1026edd48b7d4d566424ddd90","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":8012,"upload_time":"2023-09-15T14:28:59","upload_time_iso_8601":"2023-09-15T14:28:59.368521Z","url":"https://files.pythonhosted.org/packages/8c/b5/cb8fba3c3fb152fc2c3dd9c9fc6f333b1259edd6cef46aa99fff3e0c3bb7/django_middleware_global_request-0.3.3-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"8ebe8b0a2ea0d0e0febb1941d1b74801947cd1f0880275714c91f147c09f479e","md5":"302bcb53aa5beeb40f3b608de6792821","sha256":"ae90033f2fb4334492426e94bdce1333a3b280e6184dc3aa93dea7570c499b0f"},"downloads":-1,"filename":"django-middleware-global-request-0.3.3.tar.gz","has_sig":false,"md5_digest":"302bcb53aa5beeb40f3b608de6792821","packagetype":"sdist","python_version":"source","requires_python":null,"size":6505,"upload_time":"2023-09-15T14:29:01","upload_time_iso_8601":"2023-09-15T14:29:01.530581Z","url":"https://files.pythonhosted.org/packages/8e/be/8b0a2ea0d0e0febb1941d1b74801947cd1f0880275714c91f147c09f479e/django-middleware-global-request-0.3.3.tar.gz","yanked":false,"yanked_reason":null}],"0.3.4":[{"comment_text":"","digests":{"blake2b_256":"69ed300d08430e5ce98455a0a3c3ceb80335791f2793a5c367b7a3617f1dd94d","md5":"3a80499b16c228b1a98958a1b20e7ede","sha256":"461d0c56ffb2dce272ec79b812c7ea5738a30da69629a2b7de0a909b09de3527"},"downloads":-1,"filename":"django_middleware_global_request-0.3.4-py3-none-any.whl","has_sig":false,"md5_digest":"3a80499b16c228b1a98958a1b20e7ede","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":8004,"upload_time":"2024-05-22T13:38:57","upload_time_iso_8601":"2024-05-22T13:38:57.370834Z","url":"https://files.pythonhosted.org/packages/69/ed/300d08430e5ce98455a0a3c3ceb80335791f2793a5c367b7a3617f1dd94d/django_middleware_global_request-0.3.4-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"deecb73de9a6a40f03593f06edaf085316576ac7854e76f05b62f7771c951fb8","md5":"af6de08ebe6c7ec8b7048606c7c11ab3","sha256":"c3955495a2f4c05d9f50788b503196d7c590f443f980175e9be0e5d25c0f3c90"},"downloads":-1,"filename":"django-middleware-global-request-0.3.4.tar.gz","has_sig":false,"md5_digest":"af6de08ebe6c7ec8b7048606c7c11ab3","packagetype":"sdist","python_version":"source","requires_python":null,"size":6508,"upload_time":"2024-05-22T13:38:58","upload_time_iso_8601":"2024-05-22T13:38:58.575376Z","url":"https://files.pythonhosted.org/packages/de/ec/b73de9a6a40f03593f06edaf085316576ac7854e76f05b62f7771c951fb8/django-middleware-global-request-0.3.4.tar.gz","yanked":false,"yanked_reason":null}]},"urls":[{"comment_text":"","digests":{"blake2b_256":"69ed300d08430e5ce98455a0a3c3ceb80335791f2793a5c367b7a3617f1dd94d","md5":"3a80499b16c228b1a98958a1b20e7ede","sha256":"461d0c56ffb2dce272ec79b812c7ea5738a30da69629a2b7de0a909b09de3527"},"downloads":-1,"filename":"django_middleware_global_request-0.3.4-py3-none-any.whl","has_sig":false,"md5_digest":"3a80499b16c228b1a98958a1b20e7ede","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":8004,"upload_time":"2024-05-22T13:38:57","upload_time_iso_8601":"2024-05-22T13:38:57.370834Z","url":"https://files.pythonhosted.org/packages/69/ed/300d08430e5ce98455a0a3c3ceb80335791f2793a5c367b7a3617f1dd94d/django_middleware_global_request-0.3.4-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"deecb73de9a6a40f03593f06edaf085316576ac7854e76f05b62f7771c951fb8","md5":"af6de08ebe6c7ec8b7048606c7c11ab3","sha256":"c3955495a2f4c05d9f50788b503196d7c590f443f980175e9be0e5d25c0f3c90"},"downloads":-1,"filename":"django-middleware-global-request-0.3.4.tar.gz","has_sig":false,"md5_digest":"af6de08ebe6c7ec8b7048606c7c11ab3","packagetype":"sdist","python_version":"source","requires_python":null,"size":6508,"upload_time":"2024-05-22T13:38:58","upload_time_iso_8601":"2024-05-22T13:38:58.575376Z","url":"https://files.pythonhosted.org/packages/de/ec/b73de9a6a40f03593f06edaf085316576ac7854e76f05b62f7771c951fb8/django-middleware-global-request-0.3.4.tar.gz","yanked":false,"yanked_reason":null}],"vulnerabilities":[]}
