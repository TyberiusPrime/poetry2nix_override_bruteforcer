{"info":{"author":"Anders Huss","author_email":"andhus@kth.se","bugtrack_url":null,"classifiers":[],"description":"\n[![codecov](https://codecov.io/gh/andhus/scantree/branch/master/graph/badge.svg)](https://codecov.io/gh/andhus/scantree)\n\n# `scantree`\n\nRecursive directory iterator supporting:\n\n- flexible filtering including wildcard path matching\n- in memory representation of file-tree (for repeated access)\n- efficient access to directory entry properties (`posix.DirEntry` interface) extended with real path and path relative to the recursion root directory\n- detection and handling of cyclic symlinks\n\n## Installation\n\n```commandline\npip install scantree\n```\n\n## Usage\n\nSee source code for full documentation, some generic examples below.\n\nGet matching file paths:\n\n```python\nfrom scantree import scantree, RecursionFilter\n\ntree = scantree('/path/to/dir', RecursionFilter(match=['*.txt']))\nprint([path.relative for path in tree.filepaths()])\nprint([path.real for path in tree.filepaths()])\n```\n\n```\n['d1/d2/file3.txt', 'd1/file2.txt', 'file1.txt']\n['/path/to/other_dir/file3.txt', '/path/to/dir/d1/file2.txt', '/path/to/dir/file1.txt']\n```\n\nAccess metadata of directory entries in file tree:\n\n```python\nd2 = tree.directories[0].directories[0]\nprint(type(d2))\nprint(d2.path.absolute)\nprint(d2.path.real)\nprint(d2.path.is_symlink())\nprint(d2.files[0].relative)\n```\n\n```\nscantree._node.DirNode\n/path/to/dir/d1/d2\n/path/to/other_dir\nTrue\nd1/d2/file3.txt\n```\n\nAggregate information by operating on tree:\n\n```python\nhello_count = tree.apply(\n    file_apply=lambda path: sum([\n        w.lower() == 'hello' for w in\n        path.as_pathlib().read_text().split()\n    ]),\n    dir_apply=lambda dir_: sum(dir_.entries),\n)\nprint(hello_count)\n```\n\n```\n3\n```\n\n```python\nhello_count_tree =  tree.apply(\n    file_apply=lambda path: {\n        'name': path.name,\n        'count': sum([\n            w.lower() == 'hello'\n            for w in path.as_pathlib().read_text().split()\n        ])\n    },\n    dir_apply=lambda dir_: {\n        'name': dir_.path.name,\n        'count': sum(e['count'] for e in dir_.entries),\n        'sub_counts': [e for e in dir_.entries]\n    },\n)\nfrom pprint import pprint\npprint(hello_count_tree)\n```\n\n```\n{'count': 3,\n 'name': 'dir',\n 'sub_counts': [{'count': 2, 'name': 'file1.txt'},\n                {'count': 1,\n                 'name': 'd1',\n                 'sub_counts': [{'count': 1, 'name': 'file2.txt'},\n                                {'count': 0,\n                                 'name': 'd2',\n                                 'sub_counts': [{'count': 0,\n                                                 'name': 'file3.txt'}]}]}]}\n```\n\nFlexible filtering:\n\n```python\nwithout_hidden_files = scantree('.', RecursionFilter(match=['*', '!.*']))\n\nwithout_palindrome_linked_dirs = scantree(\n    '.',\n    lambda paths: [\n        p for p in paths if not (\n            p.is_dir() and\n            p.is_symlink() and\n            p.name == p.name[::-1]\n        )\n    ]\n)\n```\n\nComparison:\n\n```python\ntree = scandir('path/to/dir')\n# make some operations on filesystem, make sure file tree is the same:\nassert tree == scandir('path/to/dir')\n\n# tree contains absolute/real path info:\nimport shutil\nshutil.copytree('path/to/dir', 'path/to/other_dir')\nnew_tree = scandir('path/to/other_dir')\nassert tree != new_tree\nassert (\n    [p.relative for p in tree.leafpaths()] ==\n    [p.relative for p in new_tree.leafpaths()]\n)\n```\n\nInspect symlinks:\n\n```python\nfrom scantree import CyclicLinkedDir\n\nfile_links = []\ndir_links = []\ncyclic_links = []\n\ndef file_apply(path):\n    if path.is_symlink():\n        file_links.append(path)\n\ndef dir_apply(dir_node):\n    if dir_node.path.is_symlink():\n        dir_links.append(dir_node.path)\n    if isinstance(dir_node, CyclicLinkedDir):\n        cyclic_links.append((dir_node.path, dir_node.target_path))\n\nscantree('.', file_apply=file_apply, dir_apply=dir_apply)\n```\n","description_content_type":"text/markdown","docs_url":null,"download_url":null,"downloads":{"last_day":-1,"last_month":-1,"last_week":-1},"dynamic":null,"home_page":"https://github.com/andhus/scantree","keywords":null,"license":"MIT","maintainer":null,"maintainer_email":null,"name":"scantree","package_url":"https://pypi.org/project/scantree/","platform":null,"project_url":"https://pypi.org/project/scantree/","project_urls":{"Homepage":"https://github.com/andhus/scantree"},"provides_extra":null,"release_url":"https://pypi.org/project/scantree/0.0.3/","requires_dist":["attrs>=18.0.0","pathspec>=0.10.1"],"requires_python":">=3.8","summary":"Flexible recursive directory iterator: scandir meets glob(\"**\", recursive=True)","version":"0.0.3","yanked":false,"yanked_reason":null},"last_serial":23786759,"releases":{"0.0.1":[{"comment_text":"","digests":{"blake2b_256":"350a8709b1516110e7b5e1ef796426d8e3fcdb96d83a0cc2639a3d559df1b7c7","md5":"e7b37d7292c0d4edc96246e8d681b2b5","sha256":"2a8b163de0e4b2f9e4f37f8caf3f0b265172bbf174111e1bebc7955581895b39"},"downloads":-1,"filename":"scantree-0.0.1.tar.gz","has_sig":false,"md5_digest":"e7b37d7292c0d4edc96246e8d681b2b5","packagetype":"sdist","python_version":"source","requires_python":null,"size":13449,"upload_time":"2019-03-30T08:56:45","upload_time_iso_8601":"2019-03-30T08:56:45.145512Z","url":"https://files.pythonhosted.org/packages/35/0a/8709b1516110e7b5e1ef796426d8e3fcdb96d83a0cc2639a3d559df1b7c7/scantree-0.0.1.tar.gz","yanked":false,"yanked_reason":null}],"0.0.2":[{"comment_text":"","digests":{"blake2b_256":"fff6044ef91577de924fab757e5bea81db9a7d841118279b40dbe7da0928039b","md5":"cbbea6a91b3fcf543a6ab1e52a9df35c","sha256":"520704a85eeb7cd246a4caa9af9bcff42560e916d12989c064e6a712ea0a6284"},"downloads":-1,"filename":"scantree-0.0.2-py3-none-any.whl","has_sig":false,"md5_digest":"cbbea6a91b3fcf543a6ab1e52a9df35c","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":20794,"upload_time":"2024-01-15T21:17:36","upload_time_iso_8601":"2024-01-15T21:17:36.744662Z","url":"https://files.pythonhosted.org/packages/ff/f6/044ef91577de924fab757e5bea81db9a7d841118279b40dbe7da0928039b/scantree-0.0.2-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"48310c47399fd39bdcd0118a976d59dd1844520fb92bea668fe94902e9e291df","md5":"6262cffd190479e90b429ca5d49fadff","sha256":"e64bab9db8a5c58823b9b9e74512db02f4ee7014d2d0f5e2f20925ba8f49293b"},"downloads":-1,"filename":"scantree-0.0.2.tar.gz","has_sig":false,"md5_digest":"6262cffd190479e90b429ca5d49fadff","packagetype":"sdist","python_version":"source","requires_python":null,"size":24461,"upload_time":"2024-01-15T21:17:37","upload_time_iso_8601":"2024-01-15T21:17:37.763792Z","url":"https://files.pythonhosted.org/packages/48/31/0c47399fd39bdcd0118a976d59dd1844520fb92bea668fe94902e9e291df/scantree-0.0.2.tar.gz","yanked":false,"yanked_reason":null}],"0.0.2a0":[{"comment_text":"","digests":{"blake2b_256":"5d168bacf770982344ceccd5765b461fb1d8364f3d33a0d76e1257e22c052360","md5":"dc20bfdda96afb66c51e00e179d3cb63","sha256":"51dbff8fe526cbdb43495e9c2f0b5b79acbc621f2849504738264d89d9453d15"},"downloads":-1,"filename":"scantree-0.0.2a0-py3-none-any.whl","has_sig":false,"md5_digest":"dc20bfdda96afb66c51e00e179d3cb63","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":20812,"upload_time":"2024-01-07T20:57:41","upload_time_iso_8601":"2024-01-07T20:57:41.755052Z","url":"https://files.pythonhosted.org/packages/5d/16/8bacf770982344ceccd5765b461fb1d8364f3d33a0d76e1257e22c052360/scantree-0.0.2a0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"f5c3eab6034eaacf706d9ecc6d381c61bd7b563a0f86a3d9f1046fa2d9eb2cf1","md5":"e1f791262884126f321c6b36a0945f18","sha256":"b9d58083ffc5f8df2dd6abbd0b6fde16d27840a8370153cdf81555ca66f17cfa"},"downloads":-1,"filename":"scantree-0.0.2a0.tar.gz","has_sig":false,"md5_digest":"e1f791262884126f321c6b36a0945f18","packagetype":"sdist","python_version":"source","requires_python":null,"size":24437,"upload_time":"2024-01-07T20:57:42","upload_time_iso_8601":"2024-01-07T20:57:42.771037Z","url":"https://files.pythonhosted.org/packages/f5/c3/eab6034eaacf706d9ecc6d381c61bd7b563a0f86a3d9f1046fa2d9eb2cf1/scantree-0.0.2a0.tar.gz","yanked":false,"yanked_reason":null}],"0.0.2a1":[{"comment_text":"","digests":{"blake2b_256":"9171a7a6db14dc2281b215d40338f8e3ebe9ca2ed888bebba0a9513cc07ccb07","md5":"b00c36094b119f93035b5a965909a2b0","sha256":"02b13b1ab30c4f0a0230baf11ae6cef14b4d819f44a109af41f68e2ce3df51f7"},"downloads":-1,"filename":"scantree-0.0.2a1-py3-none-any.whl","has_sig":false,"md5_digest":"b00c36094b119f93035b5a965909a2b0","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":20815,"upload_time":"2024-01-15T21:06:07","upload_time_iso_8601":"2024-01-15T21:06:07.937080Z","url":"https://files.pythonhosted.org/packages/91/71/a7a6db14dc2281b215d40338f8e3ebe9ca2ed888bebba0a9513cc07ccb07/scantree-0.0.2a1-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"d962f88ac29e6c041dd65dfba94057542469aaeed88adec6c183a65108f449a9","md5":"9a85d6867ee5a1fc967257d7ce9dbbf4","sha256":"5f74e6e164ddd5e65bcc00687ceab164604237907525bdbbc67f8b3347df06b4"},"downloads":-1,"filename":"scantree-0.0.2a1.tar.gz","has_sig":false,"md5_digest":"9a85d6867ee5a1fc967257d7ce9dbbf4","packagetype":"sdist","python_version":"source","requires_python":null,"size":24443,"upload_time":"2024-01-15T21:06:09","upload_time_iso_8601":"2024-01-15T21:06:09.006705Z","url":"https://files.pythonhosted.org/packages/d9/62/f88ac29e6c041dd65dfba94057542469aaeed88adec6c183a65108f449a9/scantree-0.0.2a1.tar.gz","yanked":false,"yanked_reason":null}],"0.0.3":[{"comment_text":"","digests":{"blake2b_256":"4b1f7cdfed70ca95edc67e7630f1044ebba7598a8030f1aceea5557a09c21234","md5":"49f1a2e52654d79f67cafeca7fe384ac","sha256":"1c8d28a84caeae2cb072ff8dd39b3282e987ce210db255245456afaec3c5bfc4"},"downloads":-1,"filename":"scantree-0.0.3-py3-none-any.whl","has_sig":false,"md5_digest":"49f1a2e52654d79f67cafeca7fe384ac","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.8","size":20563,"upload_time":"2024-06-21T18:27:37","upload_time_iso_8601":"2024-06-21T18:27:37.682302Z","url":"https://files.pythonhosted.org/packages/4b/1f/7cdfed70ca95edc67e7630f1044ebba7598a8030f1aceea5557a09c21234/scantree-0.0.3-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"070d367ce40cda9bd7c71305ced72570087a0b1bd7164abe6a73e7dc9b964c02","md5":"eaafe426918241ddb93a199843d3effa","sha256":"ea8f7447264496a13ddb185f9a4c4192318bc25e668fb68ee6d1d0a011165325"},"downloads":-1,"filename":"scantree-0.0.3.tar.gz","has_sig":false,"md5_digest":"eaafe426918241ddb93a199843d3effa","packagetype":"sdist","python_version":"source","requires_python":">=3.8","size":24374,"upload_time":"2024-06-21T18:27:39","upload_time_iso_8601":"2024-06-21T18:27:39.897405Z","url":"https://files.pythonhosted.org/packages/07/0d/367ce40cda9bd7c71305ced72570087a0b1bd7164abe6a73e7dc9b964c02/scantree-0.0.3.tar.gz","yanked":false,"yanked_reason":null}]},"urls":[{"comment_text":"","digests":{"blake2b_256":"4b1f7cdfed70ca95edc67e7630f1044ebba7598a8030f1aceea5557a09c21234","md5":"49f1a2e52654d79f67cafeca7fe384ac","sha256":"1c8d28a84caeae2cb072ff8dd39b3282e987ce210db255245456afaec3c5bfc4"},"downloads":-1,"filename":"scantree-0.0.3-py3-none-any.whl","has_sig":false,"md5_digest":"49f1a2e52654d79f67cafeca7fe384ac","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.8","size":20563,"upload_time":"2024-06-21T18:27:37","upload_time_iso_8601":"2024-06-21T18:27:37.682302Z","url":"https://files.pythonhosted.org/packages/4b/1f/7cdfed70ca95edc67e7630f1044ebba7598a8030f1aceea5557a09c21234/scantree-0.0.3-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"070d367ce40cda9bd7c71305ced72570087a0b1bd7164abe6a73e7dc9b964c02","md5":"eaafe426918241ddb93a199843d3effa","sha256":"ea8f7447264496a13ddb185f9a4c4192318bc25e668fb68ee6d1d0a011165325"},"downloads":-1,"filename":"scantree-0.0.3.tar.gz","has_sig":false,"md5_digest":"eaafe426918241ddb93a199843d3effa","packagetype":"sdist","python_version":"source","requires_python":">=3.8","size":24374,"upload_time":"2024-06-21T18:27:39","upload_time_iso_8601":"2024-06-21T18:27:39.897405Z","url":"https://files.pythonhosted.org/packages/07/0d/367ce40cda9bd7c71305ced72570087a0b1bd7164abe6a73e7dc9b964c02/scantree-0.0.3.tar.gz","yanked":false,"yanked_reason":null}],"vulnerabilities":[]}
