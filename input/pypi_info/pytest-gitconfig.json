{"info":{"author":"","author_email":"Axel Haustant <noirbizarre@gmail.com>","bugtrack_url":null,"classifiers":["Development Status :: 4 - Beta","Intended Audience :: Developers","Programming Language :: Python","Programming Language :: Python :: 3","Programming Language :: Python :: 3 :: Only","Programming Language :: Python :: 3.10","Programming Language :: Python :: 3.11","Programming Language :: Python :: 3.12","Programming Language :: Python :: 3.8","Programming Language :: Python :: 3.9","Typing :: Typed"],"description":"# pytest-gitconfig\n\n[![CI](https://github.com/noirbizarre/pytest-gitconfig/actions/workflows/ci.yml/badge.svg)](https://github.com/noirbizarre/pytest-gitconfig/actions/workflows/ci.yml)\n[![pre-commit.ci status](https://results.pre-commit.ci/badge/github/noirbizarre/pytest-gitconfig/main.svg)](https://results.pre-commit.ci/latest/github/noirbizarre/pytest-gitconfig/main)\n[![PyPI](https://img.shields.io/pypi/v/pytest-gitconfig)](https://pypi.org/project/pytest-gitconfig/)\n[![PyPI - License](https://img.shields.io/pypi/l/pytest-gitconfig)](https://pypi.org/project/pytest-gitconfig/)\n[![codecov](https://codecov.io/gh/noirbizarre/pytest-gitconfig/branch/main/graph/badge.svg?token=OR4JScC2Lx)](https://codecov.io/gh/noirbizarre/pytest-gitconfig)\n\nProvide a gitconfig sandbox for testing\n\n## Getting started\n\nInstall `pytest-gitconfig`:\n\n```shell\n# pip\npip install pytest-gitconfig\n# pipenv\npipenv install pytest-gitconfig\n# PDM\npdm add pytest-gitconfig\n```\n\nThen the `default_gitconfig` session fixture will be automatically loaded for the session\nproviding isolation from gloval user defined values.\n\nIf you want to customize or depend on it\n\n```python\nfrom __future__ import annotations\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n  from pytest_gitconfig import GitConfig\n\n@pytest.fixture\ndef default_git_user_name() -> str:\n  return \"John Doe\"\n\n@pytest.fixture(scope=\"session\", autouse=True)\ndef fixture_depending_on_default_gitconfig(default_gitconfig: GitConfig) -> Whatever:\n    # You can set values, the following statements are equivalents\n    default_gitconfig.set({\"some\": {key: value}}) # nested dicts form\n    default_gitconfig.set({\"some.key\": value})    # dict with dotted keys form\n    # Or read them\n    data = default_gitconfig.get(\"some.key\")\n    data = default_gitconfig.get(\"some.key\", \"fallback\")\n    # If you need the path to the gitconfig file\n    assert str(default_gitconfig) == str(default_gitconfig.path)\n    return whatever\n```\n\nNote that the `default_gitconfig` fixture being session-scoped (avoiding the performance hit of creating a gitconfig file for each test),\nset values are persistent for the whole session and should be defined once preferably in your `conftest.py`.\nBut if you need to temporarily override some value, you can use the `override()` context manager which is accepting the same parameters as `set()`.\n\nThis allows to override it directly during a test:\n\n```python\nfrom __future__ import annotations\nfrom typing import TYPE_CHECKING, Iterator\n\nif TYPE_CHECKING:\n  from pytest_gitconfig import GitConfig\n\n\ndef test_something(default_gitconfig):\n    with gitconfig.override({\"other.key\": value}):\n        # Do something depending on those overridden values\n```\n\nBut to test some value in some specific tests, its best to rely on `gitconfig` which is providing a function-scoped GitConfig:\n\n```python\nfrom __future__ import annotations\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n  from pytest_gitconfig import GitConfig\n\n\ndef test_something(gitconfig: GitConfig):\n    gitconfig.set({\"other.key\": value})  # Only valid for this test\n    # Do something depending on those overridden values\n```\n\nA classical setup being:\n\n- default to using the session-scoped `default_gitconfig` to ensure isolation.\n- some specific test cases relying on some specific settings set on the `gitconfig` function-scoped fixture\n\nThis has the following benefits:\n\n- session isolation is done only once\n- test having specific settings does not impact other tests\n- test having specific settings can be run in parallel\n\n## Provided fixtures\n\n### Function-scoped\n\n#### `gitconfig -> pytest_gitconfig.GitConfig`\n\nThis is the main fixture which is creating a new and clean git config file for the tested function.\n\nIt inherit from `default_gitconfig` (meaning that all values set on `default_gitconfig` will be set on `gitconfig`)\n\nIt works by monkeypatching the `GIT_CONFIG_GLOBAL` environment variable.\nSo, if you rely on this in a context where `os.environ` is ignored, you should patch it yourself using this fixture.\n\n#### `git_user_name -> str | None`\n\nProvide the initial `user.name` setting for `gitconfig`.\nIf `None`, `user.name` will inherit its value from `default_config`,\nso most probably from `default_git_user_name` if not overridden.\n\n#### `git_user_email -> str | None`\n\nProvide the initial `user.email` setting for `gitconfig`.\nIf `None`, `user.email` will inherit its value from `default_config`,\nso most probably from `default_git_user_email` if not overridden.\n\n#### `git_init_default_branch -> str | None`\n\nProvide the initial `init.defaultBranch` setting for `gitconfig`.\nIf `None`, `init.defaultBranch` will inherit its value from `default_config`,\nso most probably `default_git_init_default_branch` if not overridden.\n\n### Session-scoped\n\n#### `defalt_gitconfig -> pytest_gitconfig.GitConfig`\n\nThis is the main fixture which is creating a new and clean git config file for the test session.\nIt is loaded automatically if you have `pytest-gitconfig` installed.\n\nBy default, it will set 3 settings:\n\n- `user.name`\n- `user.email`\n- `init.defaultBranch`\n\nIt works by monkeypatching the `GIT_CONFIG_GLOBAL` environment variable.\nSo, if you rely on this in a context where `os.environ` is ignored, you should patch it yourself using this fixture.\n\n#### `default_git_user_name -> str`\n\nProvide the initial `user.name` setting. By default `pytest_gitconfig.DEFAULT_GIT_USER_NAME`.\nOverride to provide a different initial value.\n\n#### `default_git_user_email -> str`\n\nProvide the initial `user.email` setting. By default `pytest_gitconfig.DEFAULT_GIT_USER_EMAIL`.\nOverride to provide a different initial value.\n\n#### `default_git_init_default_branch -> str`\n\nProvide the initial `init.defaultBranch` setting. By default `pytest_gitconfig.DEFAULT_GIT_BRANCH` (`main`).\nOverride to provide a different initial value.\n\n#### `sessionpatch -> pytest.MonkeyPatch`\n\nA `pytest.MonkeyPatch` session instance.\n\n## API\n\n### `pytest_gitconfig.GitConfig`\n\nAn object materializing a given `gitconfig` file.\n\n#### `set(self, data: Mapping[str, Any])`\n\nWrite some `gitconfig` values.\nIt accepts a `dict` of parsed data sections as dict or dotted-key-values.\n\n#### `get(self, key: str, default: Any = _UNSET)`\n\nGet a setting given its dotted key. Get a 2nd default value. Raise `KeyError` if config does not exists and `default` is not provided\n\n#### `override(self, data: Mapping[str, Any]) -> Iterator[GitConfig]`\n\nA context manager setting the values and restoring them on exit.\nAccept the same format a the `set()` method.\n","description_content_type":"text/markdown","docs_url":null,"download_url":"","downloads":{"last_day":-1,"last_month":-1,"last_week":-1},"dynamic":null,"home_page":"","keywords":"","license":"MIT","maintainer":"","maintainer_email":"","name":"pytest-gitconfig","package_url":"https://pypi.org/project/pytest-gitconfig/","platform":null,"project_url":"https://pypi.org/project/pytest-gitconfig/","project_urls":{"Documentation":"https://github.com/noirbizarre/pytest-gitconfig#readme","Homepage":"https://github.com/noirbizarre/pytest-gitconfig","Issues":"https://github.com/noirbizarre/pytest-gitconfig/issues","Repository":"https://github.com/noirbizarre/pytest-gitconfig"},"provides_extra":null,"release_url":"https://pypi.org/project/pytest-gitconfig/0.6.0/","requires_dist":["pytest>=7.1.2","importlib-resources>=1.3; python_version < \"3.9\""],"requires_python":">=3.8","summary":"Provide a gitconfig sandbox for testing","version":"0.6.0","yanked":false,"yanked_reason":null},"last_serial":20184634,"releases":{"0.1.0":[{"comment_text":"","digests":{"blake2b_256":"e265fb81de7a30090d615a1aacafef8bfd21da0aa00f24b5eefd39669858982a","md5":"be6ab7dae12907dfe3125436819b90ca","sha256":"8ce2df80c908ce15526f153066424875d4ed60aadac1c1b8aba495b4b60b728e"},"downloads":-1,"filename":"pytest_gitconfig-0.1.0-py3-none-any.whl","has_sig":false,"md5_digest":"be6ab7dae12907dfe3125436819b90ca","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.7","size":4224,"upload_time":"2023-06-16T14:58:00","upload_time_iso_8601":"2023-06-16T14:58:00.100287Z","url":"https://files.pythonhosted.org/packages/e2/65/fb81de7a30090d615a1aacafef8bfd21da0aa00f24b5eefd39669858982a/pytest_gitconfig-0.1.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"ec9170c6ac0e53c256e456f93e41e36067840e0710fbffe3f74f1aa7fd82683e","md5":"3d1731d6cca2ebf086e9c6ec3ab9b1f2","sha256":"c3111b923b35d078690e372913862a0123fca2b84faec39ca53ffcd0fca22dc5"},"downloads":-1,"filename":"pytest_gitconfig-0.1.0.tar.gz","has_sig":false,"md5_digest":"3d1731d6cca2ebf086e9c6ec3ab9b1f2","packagetype":"sdist","python_version":"source","requires_python":">=3.7","size":4563,"upload_time":"2023-06-16T14:58:01","upload_time_iso_8601":"2023-06-16T14:58:01.762983Z","url":"https://files.pythonhosted.org/packages/ec/91/70c6ac0e53c256e456f93e41e36067840e0710fbffe3f74f1aa7fd82683e/pytest_gitconfig-0.1.0.tar.gz","yanked":false,"yanked_reason":null}],"0.1.1":[{"comment_text":"","digests":{"blake2b_256":"69146ce0b224baa6049b4338f084c12e33bae1a291067c0ac71ada4b1f805dfa","md5":"002feaa5c549ed30273a7cb88abf228b","sha256":"c2f6f7e600bfd26272b74f4a52c82e7b55c21c58ad45438f4b686c3a65f31595"},"downloads":-1,"filename":"pytest_gitconfig-0.1.1-py3-none-any.whl","has_sig":false,"md5_digest":"002feaa5c549ed30273a7cb88abf228b","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.7","size":4234,"upload_time":"2023-06-17T01:12:59","upload_time_iso_8601":"2023-06-17T01:12:59.854023Z","url":"https://files.pythonhosted.org/packages/69/14/6ce0b224baa6049b4338f084c12e33bae1a291067c0ac71ada4b1f805dfa/pytest_gitconfig-0.1.1-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"43d97dd802b5aec6966cc009b1e1c1d0652ee83a08ebbdd0b67ad99dfcd23dda","md5":"b05d6e34db0433e053c27d27d0c8142f","sha256":"ce355de7b20109e683b6b30c971070c365c1e1d892050f80e61d149854d3ff9c"},"downloads":-1,"filename":"pytest_gitconfig-0.1.1.tar.gz","has_sig":false,"md5_digest":"b05d6e34db0433e053c27d27d0c8142f","packagetype":"sdist","python_version":"source","requires_python":">=3.7","size":4493,"upload_time":"2023-06-17T01:13:01","upload_time_iso_8601":"2023-06-17T01:13:01.379544Z","url":"https://files.pythonhosted.org/packages/43/d9/7dd802b5aec6966cc009b1e1c1d0652ee83a08ebbdd0b67ad99dfcd23dda/pytest_gitconfig-0.1.1.tar.gz","yanked":false,"yanked_reason":null}],"0.2.0":[{"comment_text":"","digests":{"blake2b_256":"f0cb83f87458e3168a69e98d0e5c437e6e9caa8c25bd8f5604d754600e084dd3","md5":"c3df59322361849ca85c120c144b9b72","sha256":"9796dec4c1f8b10ede1b5eee76419b37ec13e0af7cab5f1197b3b0f8326d586a"},"downloads":-1,"filename":"pytest_gitconfig-0.2.0-py3-none-any.whl","has_sig":false,"md5_digest":"c3df59322361849ca85c120c144b9b72","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.7","size":4637,"upload_time":"2023-06-22T09:18:17","upload_time_iso_8601":"2023-06-22T09:18:17.104764Z","url":"https://files.pythonhosted.org/packages/f0/cb/83f87458e3168a69e98d0e5c437e6e9caa8c25bd8f5604d754600e084dd3/pytest_gitconfig-0.2.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"02847487295d2b88d0b78644291d9b989ccda89e46905b0505a95d22ecfe857b","md5":"c5714e0791eb7a014e04812a40510bc8","sha256":"716609acb1f1af846b8c227d0697239a6cf760d8b9b6de06ae9f3470a519257c"},"downloads":-1,"filename":"pytest_gitconfig-0.2.0.tar.gz","has_sig":false,"md5_digest":"c5714e0791eb7a014e04812a40510bc8","packagetype":"sdist","python_version":"source","requires_python":">=3.7","size":4970,"upload_time":"2023-06-22T09:18:18","upload_time_iso_8601":"2023-06-22T09:18:18.159963Z","url":"https://files.pythonhosted.org/packages/02/84/7487295d2b88d0b78644291d9b989ccda89e46905b0505a95d22ecfe857b/pytest_gitconfig-0.2.0.tar.gz","yanked":false,"yanked_reason":null}],"0.4.0":[{"comment_text":"","digests":{"blake2b_256":"23859b5c66c57d4774983b6f8376c247069e265b07fc87f4cdb866b848a39e16","md5":"ea96c59f231fdfa42af7036f1584326a","sha256":"ec8bf2cd7bd5685205980f733a1ed38a8663c01a61fe83be79dd1d1dd03fad0e"},"downloads":-1,"filename":"pytest_gitconfig-0.4.0-py3-none-any.whl","has_sig":false,"md5_digest":"ea96c59f231fdfa42af7036f1584326a","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.8","size":5344,"upload_time":"2023-10-13T15:16:24","upload_time_iso_8601":"2023-10-13T15:16:24.448303Z","url":"https://files.pythonhosted.org/packages/23/85/9b5c66c57d4774983b6f8376c247069e265b07fc87f4cdb866b848a39e16/pytest_gitconfig-0.4.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"dff2e48ae93a8bef9f87710ef456fc671ea23e645e0753a0c8070d27ec23322c","md5":"dd82b172fd8f1c97ed95429ef62cc1d1","sha256":"4fda91056d5f1370639d72ac59927aa6eaa4585999dd7976f05019f26957d146"},"downloads":-1,"filename":"pytest_gitconfig-0.4.0.tar.gz","has_sig":false,"md5_digest":"dd82b172fd8f1c97ed95429ef62cc1d1","packagetype":"sdist","python_version":"source","requires_python":">=3.8","size":5379,"upload_time":"2023-10-13T15:16:25","upload_time_iso_8601":"2023-10-13T15:16:25.766688Z","url":"https://files.pythonhosted.org/packages/df/f2/e48ae93a8bef9f87710ef456fc671ea23e645e0753a0c8070d27ec23322c/pytest_gitconfig-0.4.0.tar.gz","yanked":false,"yanked_reason":null}],"0.5.0":[{"comment_text":"","digests":{"blake2b_256":"80b6f0c2f1f1f734249e897ace0822613fa822366147f48525825c42411ddd4f","md5":"3085a5b405435ef8f77e297d5735787f","sha256":"da8eb084ce05af106ff4de800c5ff95c5e13f9bf466425aa5e5cdf82aa0cf3c9"},"downloads":-1,"filename":"pytest_gitconfig-0.5.0-py3-none-any.whl","has_sig":false,"md5_digest":"3085a5b405435ef8f77e297d5735787f","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.8","size":5483,"upload_time":"2023-10-14T16:10:56","upload_time_iso_8601":"2023-10-14T16:10:56.445125Z","url":"https://files.pythonhosted.org/packages/80/b6/f0c2f1f1f734249e897ace0822613fa822366147f48525825c42411ddd4f/pytest_gitconfig-0.5.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"fdc4f8ad8202ddf52a8fa0f6439e912d5bf1861263e3b83e6fea278cba4024a2","md5":"aaee24063970267e3d794352b85db6fd","sha256":"439de276076354f4cbbf5f0e2eaff2d0f0fe491043cded634cb29f7376c6cc9a"},"downloads":-1,"filename":"pytest_gitconfig-0.5.0.tar.gz","has_sig":false,"md5_digest":"aaee24063970267e3d794352b85db6fd","packagetype":"sdist","python_version":"source","requires_python":">=3.8","size":5593,"upload_time":"2023-10-14T16:10:59","upload_time_iso_8601":"2023-10-14T16:10:59.452020Z","url":"https://files.pythonhosted.org/packages/fd/c4/f8ad8202ddf52a8fa0f6439e912d5bf1861263e3b83e6fea278cba4024a2/pytest_gitconfig-0.5.0.tar.gz","yanked":false,"yanked_reason":null}],"0.6.0":[{"comment_text":"","digests":{"blake2b_256":"3d2b3f21412dea350b5241947d4c6c1ada69031e7b590b6422eb1ad3110fd7e8","md5":"38793015e221e96274a106470dfeb335","sha256":"2d1e9aadd4bca9fdd13a9940191d3d2487c42b87bd325c5eebf2f36f4919d55f"},"downloads":-1,"filename":"pytest_gitconfig-0.6.0-py3-none-any.whl","has_sig":false,"md5_digest":"38793015e221e96274a106470dfeb335","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.8","size":6724,"upload_time":"2023-10-15T19:41:43","upload_time_iso_8601":"2023-10-15T19:41:43.189732Z","url":"https://files.pythonhosted.org/packages/3d/2b/3f21412dea350b5241947d4c6c1ada69031e7b590b6422eb1ad3110fd7e8/pytest_gitconfig-0.6.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"ef41f87c98b4596cf1160649e3d511fd968c470ea1b1fb1240a89611b3d3f7ca","md5":"811046898906fce004e4fcd5220b63d9","sha256":"ee06963e24c5a79f1b4bbcf86e071d54a147508a1a1a19269316531df4382cb5"},"downloads":-1,"filename":"pytest_gitconfig-0.6.0.tar.gz","has_sig":false,"md5_digest":"811046898906fce004e4fcd5220b63d9","packagetype":"sdist","python_version":"source","requires_python":">=3.8","size":8875,"upload_time":"2023-10-15T19:41:44","upload_time_iso_8601":"2023-10-15T19:41:44.701603Z","url":"https://files.pythonhosted.org/packages/ef/41/f87c98b4596cf1160649e3d511fd968c470ea1b1fb1240a89611b3d3f7ca/pytest_gitconfig-0.6.0.tar.gz","yanked":false,"yanked_reason":null}]},"urls":[{"comment_text":"","digests":{"blake2b_256":"3d2b3f21412dea350b5241947d4c6c1ada69031e7b590b6422eb1ad3110fd7e8","md5":"38793015e221e96274a106470dfeb335","sha256":"2d1e9aadd4bca9fdd13a9940191d3d2487c42b87bd325c5eebf2f36f4919d55f"},"downloads":-1,"filename":"pytest_gitconfig-0.6.0-py3-none-any.whl","has_sig":false,"md5_digest":"38793015e221e96274a106470dfeb335","packagetype":"bdist_wheel","python_version":"py3","requires_python":">=3.8","size":6724,"upload_time":"2023-10-15T19:41:43","upload_time_iso_8601":"2023-10-15T19:41:43.189732Z","url":"https://files.pythonhosted.org/packages/3d/2b/3f21412dea350b5241947d4c6c1ada69031e7b590b6422eb1ad3110fd7e8/pytest_gitconfig-0.6.0-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"ef41f87c98b4596cf1160649e3d511fd968c470ea1b1fb1240a89611b3d3f7ca","md5":"811046898906fce004e4fcd5220b63d9","sha256":"ee06963e24c5a79f1b4bbcf86e071d54a147508a1a1a19269316531df4382cb5"},"downloads":-1,"filename":"pytest_gitconfig-0.6.0.tar.gz","has_sig":false,"md5_digest":"811046898906fce004e4fcd5220b63d9","packagetype":"sdist","python_version":"source","requires_python":">=3.8","size":8875,"upload_time":"2023-10-15T19:41:44","upload_time_iso_8601":"2023-10-15T19:41:44.701603Z","url":"https://files.pythonhosted.org/packages/ef/41/f87c98b4596cf1160649e3d511fd968c470ea1b1fb1240a89611b3d3f7ca/pytest_gitconfig-0.6.0.tar.gz","yanked":false,"yanked_reason":null}],"vulnerabilities":[]}
