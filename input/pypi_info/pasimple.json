{"info":{"author":"Henrik Schnor","author_email":"hschnor@mailbox.org","bugtrack_url":null,"classifiers":["Programming Language :: Python :: 3"],"description":"# pulseaudio-simple\n\nA python wrapper for the [pulseaudio simple API](https://www.freedesktop.org/software/pulseaudio/doxygen/simple.html). Supports playing and recording audio via PulseAudio and PipeWire.\n\nThis library is feature-complete, so there won't be much ongoing activity in this repository. Reported bugs will be fixed. PRs for improvements are always welcome.\n\n\n## Dependencies\n\n- `libpulse-simple.so.0` (part of `libpulse0` on Debian or `libpulse` on Arch)\n- A running PulseAudio/PipeWire server\n\nThere's a good chance your Linux distribution comes with PulseAudio or PipeWire preinstalled.\n\n\n## Installation\n\n```sh\npip3 install pasimple\n```\n\n\n## Quick start\n\nThere are two simple convenience functions for recording/playing audio to/from a `.wav` file:\n\n```python\nfrom pasimple import record_wav, play_wav\n\n# Record 5 seconds of audio from the default recording device\nrecord_wav('/tmp/test_recording.wav', 5)\n\n# Play the recording via the default output device\nplay_wav('/tmp/test_recording.wav')\n```\n\nBoth functions block until all audio has been recorded/played. The default encoding used by `record_wav` is `PA_SAMPLE_S24LE`, mono, 41kHz. The function `play_wav` can only recognize files encoded in one of the following formats: `PA_SAMPLE_U8`, `PA_SAMPLE_S16LE`, `PA_SAMPLE_S24LE`, `PA_SAMPLE_S32LE`. For more complex use cases, scroll down to the \"Documentation\" section.\n\n\n### Recording\n\nA more extensive example for recording audio can be found in [examples/record.py](https://github.com/henrikschnor/pasimple/blob/master/examples/record.py):\n\n```python\nimport wave\nimport pasimple\n\n# Audio attributes for the recording\nFORMAT = pasimple.PA_SAMPLE_S32LE\nSAMPLE_WIDTH = pasimple.format2width(FORMAT)\nCHANNELS = 1\nSAMPLE_RATE = 41000\n\n# Record 10 seconds of audio\nwith pasimple.PaSimple(pasimple.PA_STREAM_RECORD, FORMAT, CHANNELS, SAMPLE_RATE) as pa:\n    audio_data = pa.read(CHANNELS * SAMPLE_RATE * SAMPLE_WIDTH * 10)\n\n# Save audio to a file\nwith wave.open('recording.wav', 'wb') as wave_file:\n    wave_file.setsampwidth(SAMPLE_WIDTH)\n    wave_file.setnchannels(CHANNELS)\n    wave_file.setframerate(SAMPLE_RATE)\n    wave_file.writeframes(audio_data)\n```\n\nIn this example we're explicity specifying the audio format to be used for recording. When the `PaSimple` object is created, it opens a PulseAudio stream with the specified format. Further parameters that can be used in the `PaSimple` constructor are described in more detail under \"Documentation\" below.\n\nThe recording starts as soon as the `PaSimple` object is created and audio data is buffered internally. Calls to `read` can retrieve the raw audio data, specifying the number of bytes to read as an argument. The function will block until the requested number of bytes is available. When done recording, the `PaSimple` object's audio stream should be closed with a call to `close()`. Alternatively, it can be used with python's context manager (the `with` statement in the example above).\n\nFinally, the data is written to a `.wav` file. We specify the audio format again, so that a correct `.wav` file header can be written.\n\n\n### Playing\n\nAn example for playing audio can be found in [examples/play.py](https://github.com/henrikschnor/pasimple/blob/master/examples/play.py):\n\n```python\nimport wave\nimport pasimple\n\n# Read a .wav file with its attributes\nwith wave.open('recording.wav', 'rb') as wave_file:\n    format = pasimple.width2format(wave_file.getsampwidth())\n    channels = wave_file.getnchannels()\n    sample_rate = wave_file.getframerate()\n    audio_data = wave_file.readframes(wave_file.getnframes())\n\n# Play the file via PulseAudio\nwith pasimple.PaSimple(pasimple.PA_STREAM_PLAYBACK, format, channels, sample_rate) as pa:\n    pa.write(audio_data)\n    pa.drain()\n```\n\nTo play a `.wav` file, we basically do the recording steps in reverse. First, we read the audio encoding together with the raw audio data from the file. When creating the `PaSimple` object, this time, we're opening a playback stream and specify the format of the audio we're going to play. It's then as simple as passing the raw audio data to the `write` function. Finally, we call `drain` to make sure all audio has played before closing the stream by leaving the `with` context.\n\n\n### Streaming\n\nAn annotated example of how to stream audio from/to a source/sink can be found in [examples/echo.py](https://github.com/henrikschnor/pasimple/blob/master/examples/echo.py)\n\n\n## Documentation\n\nThis sections describes all constants/functions/classes available in the `pasimple` module.\n\n### Constants\n\n**Stream directions**\n\nThe stream direction is used when creating a `PaSimple` object to specify whether the stream should be used for playing or recording audio.\n\n| Constant | Description |\n| --- | --- |\n| PA_STREAM_PLAYBACK | Open a stream for playback |\n| PA_STREAM_RECORD | Open a stream for recording |\n\n\n**Audio formats**\n\nFormats that can be used with PulseAudio to play or record audio. PulseAudio's documentation for these formats can be found [here](https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User/SupportedAudioFormats/).\n\n| Constant | Description |\n| --- | --- |\n| PA_SAMPLE_U8 | Unsigned 8 Bit PCM |\n| PA_SAMPLE_ALAW | 8 Bit a-Law |\n| PA_SAMPLE_ULAW | 8 Bit mu-Law |\n| PA_SAMPLE_S16LE | Signed 16 Bit PCM, little endian (PC) |\n| PA_SAMPLE_S16BE | Signed 16 Bit PCM, big endian |\n| PA_SAMPLE_FLOAT32LE | 32 Bit IEEE floating point, little endian (PC), range -1.0 to 1.0 |\n| PA_SAMPLE_FLOAT32BE | 32 Bit IEEE floating point, big endian, range -1.0 to 1.0 |\n| PA_SAMPLE_S32LE | Signed 32 Bit PCM, little endian (PC) |\n| PA_SAMPLE_S32BE | Signed 32 Bit PCM, big endian |\n| PA_SAMPLE_S24LE | Signed 24 Bit PCM packed, little endian (PC) |\n| PA_SAMPLE_S24BE | Signed 24 Bit PCM packed, big endian |\n| PA_SAMPLE_S24_32LE | Signed 24 Bit PCM in LSB of 32 Bit words, little endian (PC) |\n| PA_SAMPLE_S24_32BE | Signed 24 Bit PCM in LSB of 32 Bit words, big endian |\n\n\n### Convenience functions\n\n**width2format**(`sample_width`)\n- `sample_width`: Audio sample width to return a matching format for.\n\nReturns one of `PA_SAMPLE_U8`, `PA_SAMPLE_S16LE`, `PA_SAMPLE_S24LE` or `PA_SAMPLE_S32LE` (common PCM audio formats), corresponding to the provided sample width or an error if none match.\n\n\n**format2width**(`audio_format`)\n- `audio_format`: One of the `PA_SAMPLE_*` audio formats to return the width for.\n\nReturns the sample width for an audio format.\n\n\n**play_wav**(`file_path`)\n- `file_path`: Path to a `.wav` file to be played.\n\nPlays a `.wav` file via PulseAudio and blocks until all audio data has been played. The following formats are supported: `PA_SAMPLE_U8`, `PA_SAMPLE_S16LE`, `PA_SAMPLE_S24LE`, `PA_SAMPLE_S32LE`. Throws a `wave.Error` if the `.wav` file cannot be read or a `PaSimpleError` if the audio data cannot be played.\n\n\n**record_wav**(`file_path`, `length`, `format=PA_SAMPLE_S24LE`, `channels=1`, `sample_rate=41000`)\n- `file_path`: Path to a `.wav` file the recorded audio will be written to.\n- `length`: The length of the recording in seconds.\n- `format`: Audio format to be used for the recording (one of `PA_SAMPLE_U8`, `PA_SAMPLE_S16LE`, `PA_SAMPLE_S24LE`, `PA_SAMPLE_S32LE`).\n- `channels`: Number of channels to record (1=mono, 2=stereo).\n- `sample_rate`: Sample rate for the recording in Hz.\n\nRecords a `.wav` file via PulseAudio and blocks until all audio data has been recorded. The following formats are supported: `PA_SAMPLE_U8`, `PA_SAMPLE_S16LE`, `PA_SAMPLE_S24LE`, `PA_SAMPLE_S32LE`. Throws a `wave.Error` if the `.wav` file cannot be written or a `PaSimpleError` if the audio data cannot be recorded.\n\n\n### PaSimple\n\nAn instance of `PaSimple` represents an audio stream for playing or recording audio via PulseAudio. On error, all functions throw a `PaSimpleError`.\n\n**PaSimple**(`direction`, `format`, `channels`, `rate`, `app_name='python'`, `stream_name=None`, `server_name=None`, `device_name=None`, `maxlength=-1`, `tlength=-1`, `prebuf=-1`, `minreq=-1`, `fragsize=-1`):\n- `direction`: Either `PA_STREAM_PLAYBACK` or `PA_STREAM_RECORD`.\n- `format`: The audio encoding (one of `PA_SAMPLE_*`) for this stream.\n- `channels`: Integer specifying the number of channels (1=mono, 2=stereo).\n- `rate`: Integer specifying the sample rate in Hz.\n- `app_name`: String specifying the name of the application that will be registered in PulseAudio.\n- `stream_name`: `None` (use `app_name`) or a string specifying the name of this stream that will be registered in PulseAudio.\n- `server_name`: `None` (default) or a string specifying a PulseAudio server name.\n- `device_name`: `None` (default) or a string specifying a specific PulseAudio device for recording or playback.\n- `maxlength`: `-1` (default: max supported) or an integer specifying the buffer size limit in bytes.\n- `tlength`: `-1` (default: about 2s) or an integer specifying how many bytes to keep in the playback buffer.\n- `prebuf`: `-1` (use `tlength`) or an integer specifying how many bytes to buffer before starting playback.\n- `minreq`: `-1` (default: about 2s) or an integer specifying the minimum size of chunks for refilling the playback buffer in bytes.\n- `fragsize`: `-1` (default: about 2s) or an integer specifying the size of recording chunks in bytes.\n\nInitialize a PulseAudio simple API stream for playing or recording audio data.\n\n\n**close()**\n\nClose the underlying stream and free resources.\n\n\n**direction()**\n\nReturns the direction specified in the constructor.\n\n\n**format()**\n\nReturns the audio format specified in the constructor.\n\n\n**channels()**\n\nReturns the number of audio channels specified in the constructor.\n\n\n**rate()**\n\nReturns the audio rate specified in the constructor.\n\n\n**read(`num_bytes`)**\n- `num_bytes`: The number of bytes to read.\n\nRecord data from the PulseAudio server. `PA_STREAM_RECORD` must have been used during initialization. This function blocks and returns `num_bytes` bytes of audio data.\n\n\n**write(`data`)**\n- `data`: Raw audio data to be played.\n\nPlay audio via the PulseAudio server. `PA_STREAM_PLAYBACK` must have been used during initialization. Encoding of `data` must match the one specified in the constructor.\n\n\n**drain()**\n\nBlocks until all remaining data in the buffer has been played.\n\n\n**flush()**\n\nDiscards any data in the record/playback buffers.\n\n\n**get_latency()**\n\nReturns the record/playback latency reported by PulseAudio in microseconds.\n\n\n### PulseAudio error codes\n\nThis list of PulseAudio internal error codes has been [taken from here](https://gitlab.freedesktop.org/pulseaudio/pulseaudio/-/blob/master/src/pulse/def.h#L471).\n\n| Error code | Description |\n| --- | --- |\n| 0 | No error |\n| 1 | Access failure |\n| 2 | Unknown command |\n| 3 | Invalid argument |\n| 4 | Entity exists |\n| 5 | No such entity |\n| 6 | Connection refused |\n| 7 | Protocol error |\n| 8 | Timeout |\n| 9 | No authentication key |\n| 10 | Internal error |\n| 11 | Connection terminated |\n| 12 | Entity killed |\n| 13 | Invalid server |\n| 14 | Module initialization failed |\n| 15 | Bad state |\n| 16 | No data |\n| 17 | Incompatible protocol version |\n| 18 | Data too large |\n| 19 | Operation not supported |\n| 20 | The error code was unknown to the client |\n| 21 | Extension does not exist |\n| 22 | Obsolete functionality |\n| 23 | Missing implementation |\n| 24 | The caller forked without calling execve() and tried to reuse the context |\n| 25 | An IO error happened |\n| 26 | Device or resource busy |\n| 27 | Not really an error but the first invalid error code |\n","description_content_type":"text/markdown","docs_url":null,"download_url":"","downloads":{"last_day":-1,"last_month":-1,"last_week":-1},"dynamic":null,"home_page":"https://github.com/henrikschnor/pasimple","keywords":"pulseaudio,pulse,pipewire,audio,recording,playback,play","license":"MIT","maintainer":"","maintainer_email":"","name":"pasimple","package_url":"https://pypi.org/project/pasimple/","platform":"posix","project_url":"https://pypi.org/project/pasimple/","project_urls":{"Homepage":"https://github.com/henrikschnor/pasimple"},"provides_extra":null,"release_url":"https://pypi.org/project/pasimple/0.0.3/","requires_dist":null,"requires_python":"","summary":"Play/record audio via PulseAudio/PipeWire. A PulseAudio \"simple API\" wrapper.","version":"0.0.3","yanked":false,"yanked_reason":null},"last_serial":21332536,"releases":{"0.0.1":[{"comment_text":"","digests":{"blake2b_256":"ab3c3b19b6c52fa7c16cf0abc2da2f37b8a98651bacae8fc4ad8b428f644ae6a","md5":"d96a4b09152c467040fd0ecfb1c030c8","sha256":"c175608840df27f2c107c08fbf49f9fb7102351519290ae5a454e06ec83e5450"},"downloads":-1,"filename":"pasimple-0.0.1-py3-none-any.whl","has_sig":false,"md5_digest":"d96a4b09152c467040fd0ecfb1c030c8","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":8372,"upload_time":"2022-04-02T13:50:41","upload_time_iso_8601":"2022-04-02T13:50:41.925415Z","url":"https://files.pythonhosted.org/packages/ab/3c/3b19b6c52fa7c16cf0abc2da2f37b8a98651bacae8fc4ad8b428f644ae6a/pasimple-0.0.1-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"2616c5dd66425ce24143185bf49227b616bc99e176f3d740eabaccdaac2d763c","md5":"0429b104c976449617ed17155b8496c2","sha256":"033d26c0f9e15954daa238a1394a496427527c0129cb13079617e35eb81ce860"},"downloads":-1,"filename":"pasimple-0.0.1.tar.gz","has_sig":false,"md5_digest":"0429b104c976449617ed17155b8496c2","packagetype":"sdist","python_version":"source","requires_python":null,"size":7560,"upload_time":"2022-04-02T13:50:43","upload_time_iso_8601":"2022-04-02T13:50:43.696792Z","url":"https://files.pythonhosted.org/packages/26/16/c5dd66425ce24143185bf49227b616bc99e176f3d740eabaccdaac2d763c/pasimple-0.0.1.tar.gz","yanked":false,"yanked_reason":null}],"0.0.2":[{"comment_text":"","digests":{"blake2b_256":"e909a363fdad7f18a27f422475e4481122d94f1967aee41bc1498d50b0c99b57","md5":"331616291d7c7e0c9dc203077b5f2733","sha256":"5f793a13e8572e6124b107994b64d652b91934bbb409661c801ce942e573b0b2"},"downloads":-1,"filename":"pasimple-0.0.2-py3-none-any.whl","has_sig":false,"md5_digest":"331616291d7c7e0c9dc203077b5f2733","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":9337,"upload_time":"2023-04-22T00:06:45","upload_time_iso_8601":"2023-04-22T00:06:45.082988Z","url":"https://files.pythonhosted.org/packages/e9/09/a363fdad7f18a27f422475e4481122d94f1967aee41bc1498d50b0c99b57/pasimple-0.0.2-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"90c35edce0ced2c6656fdf3f7d22ee596834e5a359a5737cacac5203d2593895","md5":"8d26718835bb01fe09ba25d30456e7b3","sha256":"187a7d43fc0ea16ddf18d031a538aaa8d1128e7eaeabca96abddcd89be1e1ffa"},"downloads":-1,"filename":"pasimple-0.0.2.tar.gz","has_sig":false,"md5_digest":"8d26718835bb01fe09ba25d30456e7b3","packagetype":"sdist","python_version":"source","requires_python":null,"size":11369,"upload_time":"2023-04-22T00:06:47","upload_time_iso_8601":"2023-04-22T00:06:47.305950Z","url":"https://files.pythonhosted.org/packages/90/c3/5edce0ced2c6656fdf3f7d22ee596834e5a359a5737cacac5203d2593895/pasimple-0.0.2.tar.gz","yanked":false,"yanked_reason":null}],"0.0.3":[{"comment_text":"","digests":{"blake2b_256":"95995ffadeb3545d3f6f17853368070a13c88b17a62fe883674a0428ea82b3b5","md5":"fe9eaf679b908ea30dc9481a69662dbe","sha256":"95dcc50a691212755067bd1f82b04b9b0f0ae8738f84f8cbe5639d9f39f4ec7d"},"downloads":-1,"filename":"pasimple-0.0.3-py3-none-any.whl","has_sig":false,"md5_digest":"fe9eaf679b908ea30dc9481a69662dbe","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":9332,"upload_time":"2024-01-07T20:13:46","upload_time_iso_8601":"2024-01-07T20:13:46.560605Z","url":"https://files.pythonhosted.org/packages/95/99/5ffadeb3545d3f6f17853368070a13c88b17a62fe883674a0428ea82b3b5/pasimple-0.0.3-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"a338a32b5bf920f0b7c652e1c2b0b2b34d1a6b69ea160d2fd13686edfc191ee5","md5":"d06b7b4219039907d649d71c279d781d","sha256":"e39bfb5edff38a40b15814ad28368104b4a3d3157d0a5cd20cb03b572a424636"},"downloads":-1,"filename":"pasimple-0.0.3.tar.gz","has_sig":false,"md5_digest":"d06b7b4219039907d649d71c279d781d","packagetype":"sdist","python_version":"source","requires_python":null,"size":11354,"upload_time":"2024-01-07T20:13:48","upload_time_iso_8601":"2024-01-07T20:13:48.624513Z","url":"https://files.pythonhosted.org/packages/a3/38/a32b5bf920f0b7c652e1c2b0b2b34d1a6b69ea160d2fd13686edfc191ee5/pasimple-0.0.3.tar.gz","yanked":false,"yanked_reason":null}]},"urls":[{"comment_text":"","digests":{"blake2b_256":"95995ffadeb3545d3f6f17853368070a13c88b17a62fe883674a0428ea82b3b5","md5":"fe9eaf679b908ea30dc9481a69662dbe","sha256":"95dcc50a691212755067bd1f82b04b9b0f0ae8738f84f8cbe5639d9f39f4ec7d"},"downloads":-1,"filename":"pasimple-0.0.3-py3-none-any.whl","has_sig":false,"md5_digest":"fe9eaf679b908ea30dc9481a69662dbe","packagetype":"bdist_wheel","python_version":"py3","requires_python":null,"size":9332,"upload_time":"2024-01-07T20:13:46","upload_time_iso_8601":"2024-01-07T20:13:46.560605Z","url":"https://files.pythonhosted.org/packages/95/99/5ffadeb3545d3f6f17853368070a13c88b17a62fe883674a0428ea82b3b5/pasimple-0.0.3-py3-none-any.whl","yanked":false,"yanked_reason":null},{"comment_text":"","digests":{"blake2b_256":"a338a32b5bf920f0b7c652e1c2b0b2b34d1a6b69ea160d2fd13686edfc191ee5","md5":"d06b7b4219039907d649d71c279d781d","sha256":"e39bfb5edff38a40b15814ad28368104b4a3d3157d0a5cd20cb03b572a424636"},"downloads":-1,"filename":"pasimple-0.0.3.tar.gz","has_sig":false,"md5_digest":"d06b7b4219039907d649d71c279d781d","packagetype":"sdist","python_version":"source","requires_python":null,"size":11354,"upload_time":"2024-01-07T20:13:48","upload_time_iso_8601":"2024-01-07T20:13:48.624513Z","url":"https://files.pythonhosted.org/packages/a3/38/a32b5bf920f0b7c652e1c2b0b2b34d1a6b69ea160d2fd13686edfc191ee5/pasimple-0.0.3.tar.gz","yanked":false,"yanked_reason":null}],"vulnerabilities":[]}
